<div class="dashboard-wrapper" *ngIf="isAdmin">
  <!-- Title header -->
  <div class="dashboard-title">
    <h1 class="mat-display-3">
      Dashboard
    </h1>
  </div>
  <hr/>
  <div class="dashboard-body">
    <mat-grid-list cols="4" rowHeight="3:0.7" class="top-stats">
      <mat-grid-tile>
        <div class="dashboard-card-bg">
          <mat-card class="dashboard-card">
            <mat-card-title-group>
              <div class="icon-holder" style="background-color: #2a9d8f;">
                <mat-icon>people</mat-icon>
              </div>
              <mat-card-title class="mat-card-title-text"> {{ all_users.length }} Users</mat-card-title>
              <mat-card-subtitle> {{ new_users }} new users today</mat-card-subtitle>
            </mat-card-title-group>
          </mat-card>
        </div>
      </mat-grid-tile>
      <mat-grid-tile>
        <div class="dashboard-card-bg">
          <mat-card class="dashboard-card">
            <mat-card-title-group>
              <div class="icon-holder" style="background-color: #e9c46a;">
                <mat-icon>code</mat-icon>
              </div>
              <mat-card-title class="mat-card-title-text"> {{ all_repos.length }} Repositories</mat-card-title>
              <mat-card-subtitle> {{ new_repos }} new repositories today</mat-card-subtitle>
            </mat-card-title-group>
          </mat-card>
        </div>
      </mat-grid-tile>
      <mat-grid-tile>
        <div class="dashboard-card-bg">
          <mat-card class="dashboard-card">
            <mat-card-title-group>
              <div class="icon-holder" style="background-color: #264653;">
                <mat-icon>business_center</mat-icon>
              </div>
              <mat-card-title class="mat-card-title-text"> {{ all_organizations.length }} Organizations</mat-card-title>
              <mat-card-subtitle> {{ new_organizations }} new organizations today</mat-card-subtitle>
            </mat-card-title-group>
          </mat-card>
        </div>
      </mat-grid-tile>
      <mat-grid-tile>
        <div class="dashboard-card-bg">
          <mat-card class="dashboard-card">
            <mat-card-title-group>
              <div class="icon-holder" style="background-color: #e76f51;">
                <mat-icon>school</mat-icon>
              </div>
              <mat-card-title class="mat-card-title-text"> {{ all_classrooms.length }} Classrooms</mat-card-title>
              <mat-card-subtitle> {{ new_classrooms }} new classrooms today</mat-card-subtitle>
            </mat-card-title-group>
          </mat-card>
        </div>
      </mat-grid-tile>
    </mat-grid-list>

    <mat-grid-list cols="3" rowHeight="1:1">
      <mat-grid-tile>
        <div class="dashboard-card-bg">
          <app-activity-graph></app-activity-graph>
        </div>
      </mat-grid-tile>
      <mat-grid-tile>
        <div class="dashboard-card-bg">
          <app-premium-graph></app-premium-graph>
        </div>
      </mat-grid-tile>
      <mat-grid-tile>
        <div class="dashboard-card-bg">
          <app-repository-graph></app-repository-graph>
        </div>
      </mat-grid-tile>
    </mat-grid-list>

    <mat-grid-list cols="2" rowHeight="1:0.9">
      <mat-grid-tile>
        <div class="dashboard-card-bg">
          <mat-card class="dashboard-card" id="user-card">
            <mat-card-title-group>
              <mat-card-title class="mat-card-title-text">All Users</mat-card-title>
              <mat-card-subtitle>Browse all users</mat-card-subtitle>
              <mat-paginator [pageSizeOptions]="[10, 25, 100]"
                             aria-label="Select page of organizations"></mat-paginator>
            </mat-card-title-group>
            <div class="user-box">

              <mat-form-field appearance="standard">
                <mat-label>Search</mat-label>
                <input matInput (keyup)="applyFilterForUserTable($event)" placeholder="" #input>
              </mat-form-field>

              <div class="mat-elevation-z8">
                <table mat-table [dataSource]="userDataSource" matSort
                       matSortActive="username" matSortDisableClear matSortDirection="desc">

                  <!-- ID Column -->
                  <ng-container matColumnDef="uuid">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> UUID</th>
                    <td mat-cell
                        *matCellDef="let user"
                        [matTooltip]="user.uuid"
                        matTooltipPosition="above"
                    > {{ (user.uuid).substring(0, 8) }}...
                    </td>
                  </ng-container>

                  <!-- Username Column -->
                  <ng-container matColumnDef="username">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> User Name</th>
                    <td mat-cell *matCellDef="let user"> {{ user.username }}</td>
                  </ng-container>

                  <!-- First Name Column -->
                  <ng-container matColumnDef="firstName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> First Name</th>
                    <td mat-cell *matCellDef="let user"> {{ user.firstName }}</td>
                  </ng-container>

                  <!-- Last Name Column -->
                  <ng-container matColumnDef="lastName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Name</th>
                    <td mat-cell *matCellDef="let user"> {{ user.lastName }}</td>
                  </ng-container>

                  <!-- Email Column -->
                  <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Email</th>
                    <td mat-cell *matCellDef="let user"> {{ user.email }}</td>
                  </ng-container>

                  <!-- Subscription Column -->
                  <ng-container matColumnDef="subscription">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Sub</th>
                    <td mat-cell *matCellDef="let user">
                      <mat-icon> monetization_on</mat-icon>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumnsUserTable"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumnsUserTable; let user"
                      (click)="openUserDialog(user)"></tr>

                  <!-- Row shown when there is no matching data. -->
                  <tr class="mat-row" *matNoDataRow>
                    <td *ngIf="all_users.length > 0" class="mat-cell" colspan="5">No data matching the filter
                      "{{ input.value }}"
                    </td>
                    <td *ngIf="all_users.length == 0" class="mat-cell" colspan="5">There are no users</td>
                  </tr>
                </table>
              </div>
            </div>
          </mat-card>
        </div>
      </mat-grid-tile>
      <mat-grid-tile>
        <div class="dashboard-card-bg">
          <mat-card class="dashboard-card" id="org-card">
            <mat-card-title-group>
              <mat-card-title class="mat-card-title-text">All Organizations</mat-card-title>
              <mat-card-subtitle>Browse all organizations</mat-card-subtitle>
              <mat-paginator [pageSizeOptions]="[10, 25, 100]"
                             aria-label="Select page of organizations"></mat-paginator>
            </mat-card-title-group>
            <div class="user-box">

              <mat-form-field appearance="standard">
                <mat-label>Search</mat-label>
                <input matInput (keyup)="applyFilterForOrgTable($event)" placeholder="" #input>
              </mat-form-field>

              <div class="mat-elevation-z8">
                <table mat-table [dataSource]="orgDataSource" matSort
                       matSortActive="name" matSortDisableClear matSortDirection="desc">

                  <!-- ID Column -->
                  <ng-container matColumnDef="uuid">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> UUID</th>
                    <td mat-cell
                        *matCellDef="let org"
                        [matTooltip]="org.uuid"
                        matTooltipPosition="above"
                    > {{ (org.uuid).substring(0, 8) }}...
                    </td>
                  </ng-container>

                  <!-- Name Column -->
                  <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name</th>
                    <td mat-cell *matCellDef="let org"> {{ org.name }}</td>
                  </ng-container>

                  <!-- Owner Column -->
                  <ng-container matColumnDef="owner">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Owner</th>
                    <td mat-cell *matCellDef="let org"> {{ org.owner.username }}</td>
                  </ng-container>

                  <!-- Created -->
                  <ng-container matColumnDef="created">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Created</th>
                    <td mat-cell
                        *matCellDef="let org"> {{ (org.created).substring(0, 10) }} {{ (org.created).substring(11, 16) }}
                    </td>
                  </ng-container>

                  <!-- Teams Column -->
                  <ng-container matColumnDef="teams">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Teams</th>
                    <td mat-cell *matCellDef="let org"> {{ (org.teams).length }}</td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumnsOrgTable"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumnsOrgTable; let org"
                      (click)="openOrgDialog(org)"></tr>

                  <!-- Row shown when there is no matching data. -->
                  <tr class="mat-row" *matNoDataRow>
                    <td *ngIf="all_organizations.length > 0" class="mat-cell" colspan="5">No data matching the filter
                      "{{ input.value }}"
                    </td>
                    <td *ngIf="all_organizations.length == 0" class="mat-cell" colspan="5">There are no organizations
                    </td>
                  </tr>
                </table>
              </div>

            </div>
          </mat-card>
        </div>
      </mat-grid-tile>
    </mat-grid-list>
    <mat-grid-list cols="2" rowHeight="1:0.9">
      <mat-grid-tile>
        <div class="dashboard-card-bg">
          <mat-card class="dashboard-card" id="asd-card">
            <mat-card-title-group>
              <mat-card-title class="mat-card-title-text">All Packages</mat-card-title>
              <mat-card-subtitle>Browse all packages</mat-card-subtitle>
              <mat-paginator [pageSizeOptions]="[10, 25, 100]"
                             aria-label="Select page of organizations"></mat-paginator>
            </mat-card-title-group>
            <div class="user-box">
              <div class="mat-elevation-z8">
                <table mat-table [dataSource]="packageDataSource" matSort
                       matSortActive="id" matSortDisableClear matSortDirection="desc">

                  <!-- Name Column -->
                  <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> ID</th>
                    <td mat-cell *matCellDef="let prc"> {{ prc.id }}</td>
                  </ng-container>

                  <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name</th>
                    <td mat-cell *matCellDef="let prc"> {{ prc.name }}</td>
                  </ng-container>

                  <ng-container matColumnDef="type">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Type</th>
                    <td mat-cell *matCellDef="let prc"> {{ prc.type }}</td>
                  </ng-container>

                  <ng-container matColumnDef="price">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Price</th>
                    <td mat-cell *matCellDef="let prc"> {{ prc.price }}</td>
                  </ng-container>

                   <ng-container matColumnDef="default_members">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Default number of members</th>
                    <td mat-cell *matCellDef="let prc"> {{ prc.default_members }}</td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayColumnsPackageTable"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayColumnsPackageTable; let prc"
                      (click)="openPackageDialog(prc)"></tr>

                  <!-- Row shown when there is no matching data. -->
                  <tr class="mat-row" *matNoDataRow>
                    <td *ngIf="all_packages.length > 0" class="mat-cell" colspan="5">No data matching the filter
                      "{{ input.value }}"
                    </td>
                    <td *ngIf="all_packages.length == 0" class="mat-cell" colspan="5">There are no organizations
                    </td>
                  </tr>
                </table>
              </div>

            </div>
          </mat-card>
        </div>
      </mat-grid-tile>
      <!--      <mat-grid-tile>-->
      <!--        <div class="dashboard-card-bg">-->
      <!--          <mat-card class="dashboard-card" id="price-packages-card">-->
      <!--            <mat-card-title-group>-->
      <!--              <mat-card-title class="mat-card-title-text">All packages</mat-card-title>-->
      <!--              <mat-card-subtitle>Browse all organizations</mat-card-subtitle>-->
      <!--              <mat-paginator [pageSizeOptions]="[10, 25, 100]"-->
      <!--                             aria-label="Select page of organizations"></mat-paginator>-->
      <!--            </mat-card-title-group>-->
      <!--            <div class="package-box">-->
      <!--              <div class="mat-elevation-z8">-->
      <!--                <table mat-table [dataSource]="packageDataSource">-->
      <!--                  &lt;!&ndash; Name Column &ndash;&gt;-->
      <!--                  <ng-container matColumnDef="id">-->
      <!--                    <th mat-header-cell *matHeaderCellDef> ID</th>-->
      <!--                    <td mat-cell *matCellDef="let pck"> {{ pck.uuid }}</td>-->
      <!--                  </ng-container>-->

      <!--                  <tr mat-header-row *matHeaderRowDef="displayColumnsPackageTable"></tr>-->

      <!--                  &lt;!&ndash; Row shown when there is no matching data. &ndash;&gt;-->
      <!--                  <tr class="mat-row" *matNoDataRow>-->
      <!--                    <td *ngIf="all_packages.length == 0" class="mat-cell" colspan="5">There are no packages-->
      <!--                    </td>-->
      <!--                  </tr>-->
      <!--                </table>-->
      <!--              </div>-->
      <!--            </div>-->
      <!--          </mat-card>-->
      <!--        </div>-->
      <!--      </mat-grid-tile>-->
      <!--      <mat-grid-tile>-->
      <!--        <div class="dashboard-card-bg">-->
      <!--          <mat-card class="dashboard-card" id="vouchers-card">-->
      <!--            <mat-card-title-group>-->
      <!--              <mat-card-title class="mat-card-title-text">All Vouchers</mat-card-title>-->
      <!--            </mat-card-title-group>-->
      <!--            <div class="user-box">-->
      <!--              <div class="mat-elevation-z8">-->
      <!--                <table mat-table [dataSource]="orgDataSource" matSort-->
      <!--                       matSortActive="name" matSortDisableClear matSortDirection="desc">-->

      <!--                  &lt;!&ndash; ID Column &ndash;&gt;-->
      <!--                  <ng-container matColumnDef="uuid">-->
      <!--                    <th mat-header-cell *matHeaderCellDef mat-sort-header> UUID</th>-->
      <!--                    <td mat-cell-->
      <!--                        *matCellDef="let org"-->
      <!--                        [matTooltip]="org.uuid"-->
      <!--                        matTooltipPosition="above"-->
      <!--                    > {{ (org.uuid).substring(0, 8) }}...-->
      <!--                    </td>-->
      <!--                  </ng-container>-->

      <!--                  &lt;!&ndash; Name Column &ndash;&gt;-->
      <!--                  <ng-container matColumnDef="name">-->
      <!--                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name</th>-->
      <!--                    <td mat-cell *matCellDef="let org"> {{ org.name }}</td>-->
      <!--                  </ng-container>-->

      <!--                  &lt;!&ndash; Owner Column &ndash;&gt;-->
      <!--                  <ng-container matColumnDef="owner">-->
      <!--                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Owner</th>-->
      <!--                    <td mat-cell *matCellDef="let org"> {{ org.owner.username }}</td>-->
      <!--                  </ng-container>-->

      <!--                  &lt;!&ndash; Created &ndash;&gt;-->
      <!--                  <ng-container matColumnDef="created">-->
      <!--                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Created</th>-->
      <!--                    <td mat-cell-->
      <!--                        *matCellDef="let org"> {{ (org.created).substring(0, 10) }} {{ (org.created).substring(11, 16) }}-->
      <!--                    </td>-->
      <!--                  </ng-container>-->

      <!--                  &lt;!&ndash; Teams Column &ndash;&gt;-->
      <!--                  <ng-container matColumnDef="teams">-->
      <!--                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Teams</th>-->
      <!--                    <td mat-cell *matCellDef="let org"> {{ (org.teams).length }}</td>-->
      <!--                  </ng-container>-->

      <!--                  <tr mat-header-row *matHeaderRowDef="displayedColumnsOrgTable"></tr>-->

      <!--                  &lt;!&ndash; Row shown when there is no matching data. &ndash;&gt;-->
      <!--                  <tr class="mat-row" *matNoDataRow>-->
      <!--                    <td *ngIf="all_organizations.length > 0" class="mat-cell" colspan="5">No data matching the filter-->
      <!--                      "{{ input.value }}"-->
      <!--                    </td>-->
      <!--                    <td *ngIf="all_organizations.length == 0" class="mat-cell" colspan="5">There are no organizations-->
      <!--                    </td>-->
      <!--                  </tr>-->
      <!--                </table>-->
      <!--              </div>-->

      <!--            </div>-->
      <!--          </mat-card>-->
      <!--        </div>-->
      <!--      </mat-grid-tile>-->
    </mat-grid-list>
  </div>
</div>
